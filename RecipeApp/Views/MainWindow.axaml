<Window
    x:Class="RecipeApp.Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
    xmlns:i="clr-namespace:Avalonia.Xaml.Interactivity;assembly=Avalonia.Xaml.Interactivity"
    xmlns:ia="clr-namespace:Avalonia.Xaml.Interactions.Core;assembly=Avalonia.Xaml.Interactions"
    xmlns:material="using:Material.Icons.Avalonia"
    xmlns:vm="using:RecipeApp.ViewModels"
    Title="RecipeApp"
    MinWidth="1420"
    MinHeight="600"
    x:DataType="vm:MainWindowViewModel"
    Icon="/Assets/avalonia-logo.ico">

    <Grid Background="{DynamicResource PrimaryColor}" ColumnDefinitions="280,*">

        <!--  SideBar  -->
        <Border Grid.Column="0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="200" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Welcome Text and Search  -->
                <StackPanel Grid.Row="0" Margin="10">
                    <TextBlock
                        Height="60"
                        Margin="0,25,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="22"
                        FontWeight="Bold"
                        Text="{Binding WelcomeText}" />

                    <Separator
                        Height="1"
                        Margin="10"
                        Opacity="0.3" />

                    <TextBox
                        Classes="SearchBox"
                        MaxLength="32"
                        Text="{Binding SearchService.SearchText, Mode=TwoWay}"
                        Watermark="{Binding L[SearchWatermark]}">
                        <TextBox.InnerLeftContent>
                            <material:MaterialIcon
                                Width="25"
                                Height="25"
                                Margin="10,0,0,0"
                                Kind="Search" />
                        </TextBox.InnerLeftContent>
                    </TextBox>

                    <Separator
                        Height="1"
                        Margin="10"
                        Opacity="0.3" />

                    <!--  Add Button  -->
                    <Button
                        Classes="SideBar"
                        Command="{Binding AddRecipeCommand}"
                        CornerRadius="5">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <material:MaterialIcon
                                Width="25"
                                Height="25"
                                VerticalAlignment="Center"
                                Kind="Add" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="16"
                                Text="{Binding L[AddRecipeButton]}" />
                        </StackPanel>
                    </Button>

                </StackPanel>


                <StackPanel Grid.Row="1" Margin="10">
                    <Separator
                        Height="1"
                        Margin="10"
                        Opacity="0.3" />

                    <!--  Navigation Buttons  -->
                    <Button Classes="SideBar" Command="{Binding GoToExplorerCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <material:MaterialIcon
                                Width="25"
                                Height="25"
                                VerticalAlignment="Center"
                                Kind="HomeOutline" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="16"
                                Text="{Binding L[HomeButton]}" />
                        </StackPanel>
                    </Button>

                    <Button Classes="SideBar" Command="{Binding GoToFavoritesCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <material:MaterialIcon
                                Width="25"
                                Height="25"
                                VerticalAlignment="Center"
                                Kind="FavoriteOutline" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="16"
                                Text="{Binding L[FavoritesButton]}" />
                        </StackPanel>
                    </Button>
                </StackPanel>

                <ComboBox
                    Grid.Row="2"
                    Margin="10,10,10,130"
                    HorizontalAlignment="Right"
                    HorizontalContentAlignment="Right"
                    ItemsSource="{Binding Languages}"
                    SelectedItem="{Binding SelectedLanguage, Mode=TwoWay}">

                    <Interaction.Behaviors>
                        <EventTriggerBehavior EventName="SelectionChanged">
                            <InvokeCommandAction Command="{Binding ChangeCultureCommand}" />
                        </EventTriggerBehavior>
                    </Interaction.Behaviors>

                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <Image
                                Width="30"
                                Height="30"
                                asyncImageLoader:ImageLoader.Source="{Binding FlagPath}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <!--  Bottom Buttons  -->
                <StackPanel
                    Grid.Row="2"
                    Margin="10"
                    VerticalAlignment="Bottom">

                    <Separator
                        Height="1"
                        Margin="10"
                        Opacity="0.3" />

                    <Button Classes="SideBar" Command="{Binding ChangeCultureCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <material:MaterialIcon
                                Width="25"
                                Height="25"
                                VerticalAlignment="Center"
                                Kind="SettingsOutline" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="16"
                                Text="{Binding L[SettingsButton]}" />
                        </StackPanel>
                    </Button>

                    <Button Classes="SideBar" Command="{Binding GoToExplorerCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <material:MaterialIcon
                                Width="25"
                                Height="25"
                                VerticalAlignment="Center"
                                Kind="AboutOutline" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="16"
                                Text="{Binding L[AboutButton]}" />
                        </StackPanel>
                    </Button>
                </StackPanel>

            </Grid>
        </Border>

        <!--  Content  -->
        <TransitioningContentControl
            Grid.Column="1"
            Background="{DynamicResource BackgroundColor}"
            Content="{Binding NavService.CurrentView}" />
    </Grid>
</Window>